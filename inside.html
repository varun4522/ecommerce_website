<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cartoon Characters Shop - ToonWorld</title>
    <link rel="icon" type="image/png" href="since.png" />
    <link rel="stylesheet" href="css/styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="logo-container">
          <div class="logo-emoji">ğŸ­</div>
          <h1 class="logo">ToonWorld</h1>
        </div>
        <nav class="main-nav">
          <input id="search" class="search" placeholder="ğŸ” Search cartoon characters..." />
          <button id="cart-toggle" class="cart-btn">ğŸ›’ Cart (<span id="cart-count">0</span>)</button>
          <button id="settings-toggle" class="settings-btn">âš™ï¸ Settings</button>
        </nav>
      </div>
    </header>

    <main class="container">
      <section class="hero">
        <div class="hero-content">
          <h2 class="hero-title">ğŸŒŸ Welcome to ToonWorld <span id="user-name" class="user-name"></span>!</h2>
          <p class="hero-subtitle">Discover amazing cartoon characters and bring them to your collection! ğŸ¨âœ¨</p>
          <div class="hero-decorations">
            <span class="decoration">ğŸª</span>
            <span class="decoration">ğŸ¨</span>
            <span class="decoration">ğŸŒˆ</span>
            <span class="decoration">â­</span>
            <span class="decoration">ğŸ¯</span>
          </div>
        </div>
      </section>

      <!-- Filter Section -->
      <section class="filters-section">
        <div class="filters-header">
          <h3>ğŸ¯ Find Your Perfect Character</h3>
          <p>Filter by your favorite cartoon categories and price range!</p>
        </div>
        <div class="filters-container">
          <div class="filter-group">
            <label for="category-filter">ğŸ­ Character Type:</label>
            <select id="category-filter" class="filter-select">
              <option value="">All Characters</option>
              <option value="Disney">ğŸ° Disney Characters</option>
              <option value="Marvel">ğŸ¦¸ Marvel Heroes</option>
              <option value="Anime">ğŸŒ¸ Anime Characters</option>
              <option value="Cartoon Network">ğŸ“º Cartoon Network</option>
              <option value="Nickelodeon">ğŸ§½ Nickelodeon</option>
              <option value="Pixar">ğŸš— Pixar Characters</option>
              <option value="Studio Ghibli">ğŸŒŸ Studio Ghibli</option>
              <option value="Classic">ğŸ‘´ Classic Cartoons</option>
              <option value="Gaming">ğŸ® Gaming Characters</option>
              <option value="Other">ğŸª Other</option>
            </select>
          </div>

          <div class="filter-group">
            <label for="price-min">ğŸ’° Price Range:</label>
            <div class="price-range">
              <input type="number" id="price-min" class="price-input" placeholder="Min â‚¹" min="0" step="0.01" />
              <span class="price-separator">to</span>
              <input type="number" id="price-max" class="price-input" placeholder="Max â‚¹" min="0" step="0.01" />
            </div>
          </div>

          <div class="filter-group">
            <label for="sort-by">ğŸ“Š Sort By:</label>
            <select id="sort-by" class="filter-select">
              <option value="name">ğŸ”¤ Name (A-Z)</option>
              <option value="name-desc">ğŸ”¡ Name (Z-A)</option>
              <option value="price">ğŸ’² Price (Low to High)</option>
              <option value="price-desc">ğŸ’¸ Price (High to Low)</option>
              <option value="newest">ğŸ†• Newest First</option>
            </select>
          </div>

          <div class="filter-actions">
            <button id="apply-filters" class="btn filter-btn">ğŸ¯ Apply Filters</button>
            <button id="clear-filters" class="btn clear-btn">ğŸ”„ Clear All</button>
          </div>
        </div>
      </section>

      <section>
        <div class="products-header">
          <h3>ğŸ›ï¸ Character Collection</h3>
          <div class="products-count">
            <span class="count-emoji">ğŸ“¦</span>
            <span id="products-count">0</span> characters available
          </div>
        </div>
        <div id="products" class="products-grid" aria-live="polite"></div>
      </section>
    </main>

    <aside id="cart" class="cart">
      <div class="cart-header">
        <h3>ğŸ›’ Your Cart</h3>
        <button id="close-cart" class="close-cart">âŒ</button>
      </div>
      <div id="cart-items" class="cart-items"></div>
      <div class="cart-footer">
        <div class="total">ğŸ’° Total: â‚¹<span id="cart-total">0.00</span></div>
        <button id="checkout" class="checkout">ğŸ‰ Checkout</button>
      </div>
    </aside>

    <!-- Settings Panel -->
    <aside id="settings" class="settings">
      <div class="settings-header">
        <h3>âš™ï¸ Settings</h3>
        <button id="close-settings" class="close-settings">âŒ</button>
      </div>
      <div class="settings-content">
        <div class="settings-section">
          <h4>ğŸ‘¤ Account</h4>
          <p id="user-email" class="user-info">Loading...</p>
        </div>
        <div class="settings-section">
          <h4>ğŸ“¦ Order History</h4>
          <button id="view-orders-btn" class="settings-action-btn">ğŸ“‹ View My Orders</button>
        </div>
        <div class="settings-section">
          <h4>ğŸ¨ Preferences</h4>
          <button id="clear-cart-btn" class="settings-action-btn">ğŸ—‘ï¸ Clear Cart</button>
          <button id="clear-history-btn" class="settings-action-btn">ğŸ§¹ Clear Search History</button>
        </div>
        <div class="settings-section">
          <h4>ğŸšª Account Actions</h4>
          <button id="logout-btn" class="settings-logout-btn">ğŸ‘‹ Logout</button>
        </div>
      </div>
    </aside>

    <!-- Orders History Modal -->
    <div id="orders-history-modal" class="orders-modal">
      <div class="orders-modal-content">
        <div class="orders-header">
          <h3>ğŸ“‹ My Order History</h3>
          <button id="close-orders-modal" class="close-modal">âŒ</button>
        </div>
        <div id="orders-history-content" class="orders-history-content">
          <div class="loading-orders">
            <div class="loading-spinner-small"></div>
            <p>Loading your orders...</p>
          </div>
        </div>
      </div>
    </div>

    <div id="overlay" class="overlay"></div>

    <!-- Checkout Modals -->
    <!-- Step 1: Address Form -->
    <div id="checkout-address-modal" class="checkout-modal">
      <div class="checkout-modal-content">
        <div class="checkout-header">
          <h3>ğŸ  Shipping Address</h3>
          <button id="close-address-modal" class="close-modal">âŒ</button>
        </div>
        <form id="address-form" class="checkout-form">
          <div class="form-row">
            <div class="form-group">
              <label for="first-name">ğŸ‘¤ First Name *</label>
              <input type="text" id="first-name" name="firstName" required>
            </div>
            <div class="form-group">
              <label for="last-name">ğŸ‘¤ Last Name *</label>
              <input type="text" id="last-name" name="lastName" required>
            </div>
          </div>
          <div class="form-group">
            <label for="phone-number">ğŸ“± Phone Number *</label>
            <input type="tel" id="phone-number" name="phoneNumber" required>
          </div>
          <div class="form-group">
            <label for="address1">ğŸ¡ Address Line 1 *</label>
            <input type="text" id="address1" name="address1" placeholder="Street address, apartment, suite, etc." required>
          </div>
          <div class="form-group">
            <label for="address2">ğŸ¢ Address Line 2</label>
            <input type="text" id="address2" name="address2" placeholder="Building, company, etc. (optional)">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="city">ğŸ™ï¸ City *</label>
              <input type="text" id="city" name="city" required>
            </div>
            <div class="form-group">
              <label for="state">ğŸ—ºï¸ State *</label>
              <input type="text" id="state" name="state" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="zip-code">ğŸ“® ZIP Code *</label>
              <input type="text" id="zip-code" name="zipCode" required>
            </div>
            <div class="form-group">
              <label for="country">ğŸŒ Country</label>
              <input type="text" id="country" name="country" value="India" readonly>
            </div>
          </div>
          <button type="submit" class="checkout-btn">ğŸ“ Confirm Address</button>
        </form>
      </div>
    </div>

    <!-- Step 2: Order Confirmation -->
    <div id="checkout-confirmation-modal" class="checkout-modal">
      <div class="checkout-modal-content">
        <div class="checkout-header">
          <h3>ğŸ“‹ Order Confirmation</h3>
          <button id="close-confirmation-modal" class="close-modal">âŒ</button>
        </div>
        <div class="order-details">
          <div class="shipping-info">
            <h4>ğŸšš Shipping Address</h4>
            <div id="confirmed-address" class="address-display"></div>
          </div>
          <div class="product-details">
            <h4>ğŸ›ï¸ Order Items</h4>
            <div id="order-items" class="order-items-list"></div>
          </div>
          <div class="payment-method">
            <h4>ğŸ’° Payment Method</h4>
            <div class="payment-option">
              <input type="radio" id="cod" name="payment" value="cod" checked>
              <label for="cod">ğŸ’µ Cash on Delivery (COD)</label>
            </div>
          </div>
          <div class="order-total">
            <div class="total-line">
              <span>Subtotal:</span>
              <span>â‚¹<span id="order-subtotal">0.00</span></span>
            </div>
            <div class="total-line">
              <span>Shipping:</span>
              <span>â‚¹<span id="shipping-cost">75.00</span></span>
            </div>
            <div class="total-line total-final">
              <span>Total:</span>
              <span>â‚¹<span id="order-final-total">0.00</span></span>
            </div>
          </div>
        </div>
        <button id="place-order-btn" class="checkout-btn">ğŸ‰ Place Order</button>
      </div>
    </div>

    <!-- Step 3: Order Success -->
    <div id="order-success-modal" class="checkout-modal">
      <div class="checkout-modal-content success-content">
        <div class="success-animation">
          <div class="checkmark-circle">
            <div class="checkmark">âœ“</div>
          </div>
        </div>
        <h3>ğŸ‰ Order Placed Successfully!</h3>
        <div class="order-success-details">
          <p>ğŸŠ Thank you for your order!</p>
          <p>ğŸ“¦ Your cartoon characters are on their way!</p>
          <div class="order-number">
            <strong>Order #: <span id="order-number"></span></strong>
          </div>
          <p>ğŸ“± You will receive a confirmation SMS shortly.</p>
        </div>
        <button id="continue-shopping-btn" class="checkout-btn">ğŸ›ï¸ Continue Shopping</button>
      </div>
    </div>

    <footer class="site-footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h4>ğŸ­ ToonWorld</h4>
            <p>Your magical destination for cartoon characters!</p>
          </div>
          <div class="footer-section">
            <h4>âœ¨ Features</h4>
            <p>â€¢ Wide character selection</p>
            <p>â€¢ Safe & secure shopping</p>
            <p>â€¢ Fast delivery</p>
          </div>
          <div class="footer-section">
            <h4>ğŸŒˆ Fun Fact</h4>
            <p>Demo shop with colorful cartoon vibes! ğŸ¨</p>
          </div>
        </div>
      </div>
    </footer>

    <script src="js/main.js" defer></script>
  </body>
</html>
